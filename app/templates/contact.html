{% extends "base.html" %}

{% block title %}{{ t.contact_title }} - {{ t.app_name }}{% endblock %}

{% block content %}
<div class="container mx-auto px-6 py-12">
    <div class="max-w-2xl mx-auto">
        <div class="card-mythical p-8">
            <h1 class="font-mythical text-3xl text-gold mb-4 text-center">
                {{ t.contact_title }}
            </h1>
            <p class="text-gray-400 text-center mb-8">
                {{ t.contact_subtitle }}
            </p>

            <!-- Success Message -->
            <div id="success-message" class="hidden mb-6 p-4 bg-green-500/20 border border-green-500/50 rounded-lg text-green-300 text-center">
                {{ t.contact_success }}
            </div>

            <!-- Error Message -->
            <div id="error-message" class="hidden mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg text-red-300 text-center">
                {{ t.contact_error }}
            </div>

            <form id="contact-form" action="https://formsubmit.co/kyh0920@gmail.com" method="POST" class="space-y-6">
                <!-- FormSubmit Configuration -->
                <input type="hidden" name="_subject" value="[Mythical Essence] New Inquiry">
                <input type="hidden" name="_captcha" value="false">
                <input type="hidden" name="_template" value="table">
                <input type="text" name="_honey" style="display:none">
                <input type="hidden" name="_next" value="{{ request.url }}?success=true">

                <!-- Name -->
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-300 mb-2">
                        {{ t.contact_name }} <span class="text-red-400">*</span>
                    </label>
                    <input type="text" id="name" name="name" required
                           class="w-full px-4 py-3 rounded-lg bg-white/5 border border-white/20 text-white placeholder-gray-500 focus:border-gold focus:outline-none focus:ring-1 focus:ring-gold transition-colors"
                           placeholder="{{ t.contact_name_placeholder }}">
                </div>

                <!-- Email -->
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-300 mb-2">
                        {{ t.contact_email }} <span class="text-red-400">*</span>
                    </label>
                    <input type="email" id="email" name="email" required
                           class="w-full px-4 py-3 rounded-lg bg-white/5 border border-white/20 text-white placeholder-gray-500 focus:border-gold focus:outline-none focus:ring-1 focus:ring-gold transition-colors"
                           placeholder="example@email.com">
                </div>

                <!-- Subject -->
                <div>
                    <label for="subject" class="block text-sm font-medium text-gray-300 mb-2">
                        {{ t.contact_subject }}
                    </label>
                    <select id="subject" name="subject"
                            class="w-full px-4 py-3 rounded-lg bg-white/5 border border-white/20 text-white focus:border-gold focus:outline-none focus:ring-1 focus:ring-gold transition-colors">
                        <option value="{{ t.contact_subject_general }}">{{ t.contact_subject_general }}</option>
                        <option value="{{ t.contact_subject_bug }}">{{ t.contact_subject_bug }}</option>
                        <option value="{{ t.contact_subject_feature }}">{{ t.contact_subject_feature }}</option>
                        <option value="{{ t.contact_subject_partnership }}">{{ t.contact_subject_partnership }}</option>
                        <option value="{{ t.contact_subject_other }}">{{ t.contact_subject_other }}</option>
                    </select>
                </div>

                <!-- Message -->
                <div>
                    <label for="message" class="block text-sm font-medium text-gray-300 mb-2">
                        {{ t.contact_message }} <span class="text-red-400">*</span>
                    </label>
                    <textarea id="message" name="message" rows="5" required
                              class="w-full px-4 py-3 rounded-lg bg-white/5 border border-white/20 text-white placeholder-gray-500 focus:border-gold focus:outline-none focus:ring-1 focus:ring-gold transition-colors resize-none"
                              placeholder="{{ t.contact_message_placeholder }}"></textarea>
                </div>

                <!-- Submit Button -->
                <div class="text-center">
                    <button type="submit" class="btn-mythical w-full sm:w-auto">
                        {{ t.contact_submit }}
                    </button>
                </div>
            </form>

            <!-- Direct Email Option -->
            <div class="mt-8 pt-6 border-t border-white/10 text-center">
                <p class="text-gray-400 text-sm mb-2">
                    {{ t.contact_direct_email }}
                </p>
                <a href="mailto:kyh0920@gmail.com" class="text-gold hover:underline">
                    kyh0920@gmail.com
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    // Check for success parameter in URL
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('success') === 'true') {
        document.getElementById('success-message').classList.remove('hidden');
        document.getElementById('contact-form').reset();
        // Remove success parameter from URL
        window.history.replaceState({}, document.title, window.location.pathname);
    }
</script>
{% endblock %}
